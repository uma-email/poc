<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="907" height="785"><desc>Title%20UMA%20Wide%20Ecosystem%20-%20Bob%20from%20Alice%20(pull%20data)%0A%0Aactor%20%22RO%5CnAlice%22%20as%20Alice%20%23lightpink%0Aparticipant%20%22AuthZ%20Server%22%20as%20asServer%20%23lightpink%0Aparticipant%20%22Resource%20Server%20(RS)%22%20as%20rsServer%20%23lightpink%0Aparticipant%20%22RqP%20Client%22%20as%20rqpClient%20%23lightsteelblue%0Aparticipant%20%22Claims%20Provider%20(CP)%22%20as%20claimsProvider%20%23lightsteelblue%0Aparticipant%20%22AuthN%20Server%22%20as%20authServer%20%23lightsteelblue%0Aactor%20%22RqP%5CnBob%22%20as%20Bob%20%23lightsteelblue%0A%0Abottomparticipants%0ArqpClient%3C-Bob%3AInitiate%20request%0ArsServer%3C-rqpClient%3A1.%20Request%20'Outgoing'%20resource%0ArsServer-%3ErqpClient%3A2.%20401%20with%20permission%20ticket%0ArqpClient-%3EauthServer%3A3.%20Get%20access_token%5Cn(RqP%20Client%20client_credentials)%0ArqpClient%3C-authServer%3A4.%20Return%20access_token%0Anote%20left%20of%20rqpClient%3ACreate%20ticket_digest%0ArqpClient-%3EclaimsProvider%3A5.%20Get%20claims_token%5Cn(access_token%2C%20Bob's%20email_address%2C%20ticket_digest)%0A%0Aalt%20RqP%20Client%20uses%20Authorization%20Code%20Grant%20-%20Bob%20is%20involved%0Anote%20right%20of%20claimsProvider%3AExtract%20Bob's%20user_claims%20from%20access_token%0Aelse%20RqP%20Client%20uses%20Client%20Credential%20Grant%20-%20Bob%20is%20not%20involved%0AauthServer%3C-claimsProvider%3AGet%20Bob's%20user_claims%5Cn(CP%20client_credentials%2C%20Bob's%20email_address)%0AauthServer-%3EclaimsProvider%3AReturn%20Bob's%20user_claims%0Aend%0A%0Aloop%20Authorization%20process%0ArqpClient%3C-claimsProvider%3A6.%20Return%20claims_token%5Cn(Bob's%20user_claims%2C%20ticket_digest)%0ArqpClient-%3EasServer%3A7.%20Call%20token%20endpoint%5Cn(ticket%2C%20claims_token)%0Anote%20over%20asServer%3AEvaluate%5Cn1.%20ticket%5Cn2.%20ticket_digest%5Cn3.%20claims_token%20signature%5Cn4.%20user_claims%5Cn5.%20domain%20part%20of%20email_address%0ArqpClient%3C-asServer%3A8.%20Return%20RPT%0Aend%0ArsServer%3C-rqpClient%3A9.%20Get%20data%20from%20'Outgoing'%20resource%5Cn(RPT)%0ArsServer-%3ErqpClient%3A10.%20200%20Ok</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="907" height="785"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="10.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="299.09501660970244" y="13.19381805" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">UMA Wide Ecosystem - Bob from Alice (pull data)</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 14.507215167871093 78.15138224949999 L 14.507215167871093 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 106.64449771183594 78.15138224949999 L 106.64449771183594 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 207.8794458251133 78.15138224949999 L 207.8794458251133 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 78.15138224949999 L 381.6329434033685 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 616.8573577296705 78.15138224949999 L 616.8573577296705 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 838.1789288453346 78.15138224949999 L 838.1789288453346 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 893.5871912204791 78.15138224949999 L 893.5871912204791 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/></g><g><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 19.520866026871094 32.1489366485 A 5.013650858999999 5.013650858999999 0 1 1 19.52086352004587 32.143922998476604 M 14.507215167871093 37.16258750749999 L 14.507215167871093 47.893559521499995 M 8.174182503871094 41.03277413549999 L 20.840247831871093 41.03277413549999 M 14.507215167871093 47.893559521499995 L 8.174182503871094 57.92086123949999 M 14.507215167871093 47.893559521499995 L 20.840247831871093 57.92086123949999" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="7.511113788476562" y="66.71673993949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RO</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4.39793935" y="75.51261863949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 69.624422081125 54.4904685465 L 143.66457334254687 54.4904685465 L 143.66457334254687 78.15138224949999 L 69.624422081125 78.15138224949999 L 69.624422081125 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="79.167950470625" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthZ Server</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 152.46045204254688 54.4904685465 L 263.2984396076797 54.4904685465 L 263.2984396076797 78.15138224949999 L 152.46045204254688 78.15138224949999 L 152.46045204254688 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="162.0039804320469" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Resource Server (RS)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 349.7961639762708 54.4904685465 L 413.46972283046614 54.4904685465 L 413.46972283046614 78.15138224949999 L 349.7961639762708 78.15138224949999 L 349.7961639762708 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="359.3396923657708" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP Client</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 563.5176028387057 54.4904685465 L 670.1971126206354 54.4904685465 L 670.1971126206354 78.15138224949999 L 563.5176028387057 78.15138224949999 L 563.5176028387057 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="573.0611312282057" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Claims Provider (CP)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 800.6396118816158 54.4904685465 L 875.7182458090533 54.4904685465 L 875.7182458090533 78.15138224949999 L 800.6396118816158 78.15138224949999 L 800.6396118816158 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="810.1831402711158" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthN Server</text></g><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 898.6008420794791 32.1489366485 A 5.013650858999999 5.013650858999999 0 1 1 898.6008395726539 32.143922998476604 M 893.5871912204791 37.16258750749999 L 893.5871912204791 47.893559521499995 M 887.2541585564791 41.03277413549999 L 899.9202238844791 41.03277413549999 M 893.5871912204791 47.893559521499995 L 887.2541585564791 57.92086123949999 M 893.5871912204791 47.893559521499995 L 899.9202238844791 57.92086123949999" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="884.5141245090533" y="66.71673993949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="885.2884317600299" y="75.51261863949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 19.520866026871094 754.1586397379998 A 5.013650858999999 5.013650858999999 0 1 1 19.52086352004587 754.1536260879764 M 14.507215167871093 759.1722905969998 L 14.507215167871093 769.9032626109998 M 8.174182503871094 763.0424772249999 L 20.840247831871093 763.0424772249999 M 14.507215167871093 769.9032626109998 L 8.174182503871094 779.9305643289998 M 14.507215167871093 769.9032626109998 L 20.840247831871093 779.9305643289998" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="7.511113788476562" y="736.9626968794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RO</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4.39793935" y="745.7585755794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 69.624422081125 728.1668181794998 L 143.66457334254687 728.1668181794998 L 143.66457334254687 751.8277318824998 L 69.624422081125 751.8277318824998 L 69.624422081125 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="79.167950470625" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthZ Server</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 152.46045204254688 728.1668181794998 L 263.2984396076797 728.1668181794998 L 263.2984396076797 751.8277318824998 L 152.46045204254688 751.8277318824998 L 152.46045204254688 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="162.0039804320469" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Resource Server (RS)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 349.7961639762708 728.1668181794998 L 413.46972283046614 728.1668181794998 L 413.46972283046614 751.8277318824998 L 349.7961639762708 751.8277318824998 L 349.7961639762708 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="359.3396923657708" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP Client</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 563.5176028387057 728.1668181794998 L 670.1971126206354 728.1668181794998 L 670.1971126206354 751.8277318824998 L 563.5176028387057 751.8277318824998 L 563.5176028387057 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="573.0611312282057" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Claims Provider (CP)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 800.6396118816158 728.1668181794998 L 875.7182458090533 728.1668181794998 L 875.7182458090533 751.8277318824998 L 800.6396118816158 751.8277318824998 L 800.6396118816158 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="810.1831402711158" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthN Server</text></g><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 898.6008420794791 754.1586397379998 A 5.013650858999999 5.013650858999999 0 1 1 898.6008395726539 754.1536260879764 M 893.5871912204791 759.1722905969998 L 893.5871912204791 769.9032626109998 M 887.2541585564791 763.0424772249999 L 899.9202238844791 763.0424772249999 M 893.5871912204791 769.9032626109998 L 887.2541585564791 779.9305643289998 M 893.5871912204791 769.9032626109998 L 899.9202238844791 779.9305643289998" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="884.5141245090533" y="736.9626968794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="885.2884317600299" y="745.7585755794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g></g><g><g><g><rect fill="white" stroke="none" x="605.6963861905175" y="95.74313964949998" width="63.8273622428125" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="607.0157679955175" y="103.65943047949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Initiate request</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 893.5871912204791 107.17778195949998 L 388.87488353303513 107.17778195949998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,107.17778195949998) translate(-381.6329434033685,-107.17778195949998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 388.9628423200351 103.51283250116664 L 381.6329434033685 107.17778195949998 L 388.9628423200351 110.84273141783332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="229.43111365152603" y="120.37160000949997" width="130.6501619254297" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="230.75049545652604" y="128.28789083949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Request 'Outgoing' resource</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 131.80624231949997 L 215.12138595477995 131.80624231949997" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(207.8794458251133,131.80624231949997) translate(-207.8794458251133,-131.80624231949997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 215.20934474177997 128.14129286116665 L 207.8794458251133 131.80624231949997 L 215.20934474177997 135.4711917778333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="234.8512720377565" y="145.00006036949998" width="119.80984515296875" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="236.1706538427565" y="152.91635119949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. 401 with permission ticket</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 207.8794458251133 156.43470267949996 L 374.3910032737018 156.43470267949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,156.43470267949996) translate(-381.6329434033685,-156.43470267949996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 374.3030444867018 152.76975322116664 L 381.6329434033685 156.43470267949996 L 374.3030444867018 160.0996521378333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="545.85391119191" y="169.62852072949997" width="87.67602557289062" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="545.85391119191" y="178.42439942949997" width="128.10404986488282" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="547.17329299691" y="177.54481155949998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Get access_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="547.17329299691" y="186.34069025949998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(RqP Client client_credentials)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 189.85904173949996 L 830.9369887156679 189.85904173949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(838.1789288453346,189.85904173949996) translate(-838.1789288453346,-189.85904173949996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 830.8490299286678 186.19409228116663 L 838.1789288453346 189.85904173949996 L 830.8490299286678 193.52399119783328 Z"/></g></g><g><g><rect fill="white" stroke="none" x="559.5865085429842" y="203.05285978949996" width="100.63885516273437" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="560.9058903479843" y="210.96915061949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Return access_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 838.1789288453346 214.48750209949995 L 388.87488353303513 214.48750209949995" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,214.48750209949995) translate(-381.6329434033685,-214.48750209949995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 388.9628423200351 210.82255264116662 L 381.6329434033685 214.48750209949995 L 388.9628423200351 218.15245155783327 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 237.79658065449993 L 377.23500405336847 237.79658065449993 M 270.1654731367278 227.68132014949995 L 369.3187132233685 227.68132014949995 L 377.23500405336847 235.59761097949996 L 377.23500405336847 247.91184115949994 L 270.1654731367278 247.91184115949994 L 270.1654731367278 227.68132014949995 M 369.3187132233685 227.68132014949995 L 369.3187132233685 235.59761097949996 L 377.23500405336847 235.59761097949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="282.4797033167278" y="239.99555032949993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create ticket_digest</text></g><g><g><rect fill="white" stroke="none" x="392.04139986503515" y="261.10565920949995" width="85.07527178871094" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="392.04139986503515" y="269.90153790949995" width="214.40750140296876" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="393.3607816700351" y="269.0219500394999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. Get claims_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="393.3607816700351" y="277.81782873949993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(access_token, Bob's email_address, ticket_digest)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 281.33618021949997 L 609.6154176000039 281.33618021949997" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(616.8573577296705,281.33618021949997) translate(-616.8573577296705,-281.33618021949997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 609.5274588130038 277.6712307611666 L 616.8573577296705 281.33618021949997 L 609.5274588130038 285.0011296778333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 616.8573577296705 328.3941312645 L 621.2552970796705 328.3941312645 M 621.2552970796705 318.27887075949997 L 825.8646986653346 318.27887075949997 L 833.7809894953346 326.19516158949995 L 833.7809894953346 338.5093917695 L 621.2552970796705 338.5093917695 L 621.2552970796705 318.27887075949997 M 825.8646986653346 318.27887075949997 L 825.8646986653346 326.19516158949995 L 833.7809894953346 326.19516158949995" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="633.5695272596705" y="330.5931009395" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Extract Bob's user_claims from access_token</text></g><g><g><rect fill="white" stroke="none" x="633.5391164019361" y="375.4520823095" width="95.66505450355469" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="633.5391164019361" y="384.2479610095" width="187.95805377113282" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.8584982069361" y="383.36837313949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get Bob's user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="634.8584982069361" y="392.16425183949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(CP client_credentials, Bob's email_address)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 616.8573577296705 395.6826033195 L 830.9369887156679 395.6826033195" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(838.1789288453346,395.6826033195) translate(-838.1789288453346,-395.6826033195)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 830.8490299286678 392.01765386116665 L 838.1789288453346 395.6826033195 L 830.8490299286678 399.34755277783336 Z"/></g></g><g><g><rect fill="white" stroke="none" x="673.2042012408033" y="408.8764213695" width="108.62788409339844" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="674.5235830458033" y="416.7927121995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return Bob's user_claims</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 838.1789288453346 420.3110636795 L 624.0992978593372 420.3110636795" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(616.8573577296705,420.3110636795) translate(-616.8573577296705,-420.3110636795)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 624.1872566463372 416.64611422116667 L 616.8573577296705 420.3110636795 L 624.1872566463372 423.9760131378334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="428.60241213310155" y="470.4475722695" width="98.03810137855469" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="428.60241213310155" y="479.2434509695" width="141.28547686683595" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="429.92179393810153" y="478.36386309949995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">6. Return claims_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="429.92179393810153" y="487.15974179949995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Bob's user_claims, ticket_digest)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 616.8573577296705 490.6780932795 L 388.87488353303513 490.6780932795" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,490.6780932795) translate(-381.6329434033685,-490.6780932795)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 388.9628423200351 487.01314382116664 L 381.6329434033685 490.6780932795 L 388.9628423200351 494.34304273783334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="197.70219702896938" y="503.87191132949994" width="92.87304705726562" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="197.70219702896938" y="512.6677900294999" width="90.24490374671875" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="199.0215788339694" y="511.7882021594999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">7. Call token endpoint</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="199.0215788339694" y="520.5840808594999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(ticket, claims_token)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 524.1024323395 L 113.88643784150261 524.1024323395" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(106.64449771183594,524.1024323395) translate(-106.64449771183594,-524.1024323395)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 113.9743966285026 520.4374828811666 L 106.64449771183594 524.1024323395 L 113.9743966285026 527.7673817978333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 27.7010332178711 537.2962503895 L 177.67167137580077 537.2962503895 L 185.58796220580078 545.2125412194999 L 185.58796220580078 601.5061648994999 L 27.7010332178711 601.5061648994999 L 27.7010332178711 537.2962503895 M 177.67167137580077 537.2962503895 L 177.67167137580077 545.2125412194999 L 185.58796220580078 545.2125412194999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="549.6104805694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Evaluate</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="558.4063592694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. ticket</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="567.2022379694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. ticket_digest</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="575.9981166694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. claims_token signature</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="584.7939953694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.015263397871095" y="593.5898740694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. domain part of email_address</text></g><g><g><rect fill="white" stroke="none" x="213.0107450026022" y="614.6999829494999" width="62.25595111" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="214.3301268076022" y="622.6162737794999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">8. Return RPT</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 106.64449771183594 626.1346252594999 L 374.3910032737018 626.1346252594999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,626.1346252594999) translate(-381.6329434033685,-626.1346252594999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 374.3030444867018 622.4696758011665 L 381.6329434033685 626.1346252594999 L 374.3030444867018 629.7995747178333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="218.28790228677994" y="652.5222613594999" width="152.9365846549219" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="218.28790228677994" y="661.3181400594999" width="27.507705870742186" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="219.60728409177995" y="660.4385521894999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">9. Get data from 'Outgoing' resource</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="219.60728409177995" y="669.2344308894999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(RPT)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 381.6329434033685 672.7527823694999 L 215.12138595477995 672.7527823694999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(207.8794458251133,672.7527823694999) translate(-207.8794458251133,-672.7527823694999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 215.20934474177997 669.0878329111665 L 207.8794458251133 672.7527823694999 L 215.20934474177997 676.4177318278332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="270.6197656901003" y="685.9466004194999" width="48.27285784828125" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="271.93914749510026" y="693.8628912494999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">10. 200 Ok</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 207.8794458251133 697.3812427294998 L 374.3910032737018 697.3812427294998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(381.6329434033685,697.3812427294998) translate(-381.6329434033685,-697.3812427294998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 374.3030444867018 693.7162932711665 L 381.6329434033685 697.3812427294998 L 374.3030444867018 701.0461921878332 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 586.0717822796705 294.52999826949997 L 868.9645042953346 294.52999826949997 L 868.9645042953346 433.5048817295 L 586.0717822796705 433.5048817295 L 586.0717822796705 294.52999826949997 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 586.0717822796705 294.52999826949997 L 586.0717822796705 305.08505270949996 L 612.3612935859205 305.08505270949996 L 617.6388208059205 299.8075254895 L 617.6388208059205 294.52999826949997 L 586.0717822796705 294.52999826949997" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="594.8676609796705" y="301.5667012295" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="626.4346995059205" y="301.5667012295" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[RqP Client uses Authorization Code Grant - Bob is involved]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 586.0717822796705 351.7032098195 L 868.9645042953346 351.7032098195" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="2.198969675"/></g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="626.4346995059205" y="358.7399127795" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[RqP Client uses Client Credential Grant - Bob is not involved]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 23.303093867871098 446.69869977950003 L 647.6429331796705 446.69869977950003 L 647.6429331796705 639.3284433094999 L 23.303093867871098 639.3284433094999 L 23.303093867871098 446.69869977950003 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 23.303093867871098 446.69869977950003 L 23.303093867871098 457.2537542195 L 56.623595774707034 457.2537542195 L 61.90112299470704 451.97622699950006 L 61.90112299470704 446.69869977950003 L 23.303093867871098 446.69869977950003" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="32.0989725678711" y="453.73540273950005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="70.69700169470704" y="453.73540273950005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Authorization process]</text></g></g></g></svg>