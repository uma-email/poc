<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="914" height="785"><desc>Title%20UMA%20Wide%20Ecosystem%20-%20Alice%20to%20Bob%20(push%20data)%0A%0Aactor%20%22RqP%5CnAlice%22%20as%20Alice%20%23lightpink%0Aparticipant%20%22AuthN%20Server%22%20as%20authServer%20%23lightpink%0Aparticipant%20%22Claims%20Provider%20(CP)%22%20as%20claimsProvider%20%23lightpink%0Aparticipant%20%22RqP%20Client%22%20as%20rqpClient%20%23lightpink%0Aparticipant%20%22Resource%20Server%20(RS)%22%20as%20rsServer%20%23lightsteelblue%0Aparticipant%20%22AuthZ%20Server%22%20as%20asServer%20%23lightsteelblue%0Aactor%20%22RO%5CnBob%22%20as%20Bob%20%23lightsteelblue%0A%0Abottomparticipants%0A%0AAlice-%3ErqpClient%3AInitiate%20request%0ArqpClient-%3ErsServer%3A1.%20Request%20'Incoming'%20resource%0ArqpClient%3C-rsServer%3A2.%20401%20with%20permission%20ticket%0AauthServer%3C-rqpClient%3A3.%20Get%20access_token%5Cn(RqP%20Client%20client_credentials)%0AauthServer-%3ErqpClient%3A4.%20Return%20access_token%0Anote%20right%20of%20rqpClient%3ACreate%20ticket_digest%0AclaimsProvider%3C-rqpClient%3A5.%20Get%20claims_token%5Cn(access_token%2C%20Alice's%20email_address%2C%20ticket_digest)%0Aalt%20RqP%20Client%20uses%20Authorization%20Code%20Grant%20-%20Alice%20is%20involved%0Anote%20left%20of%20claimsProvider%3AExtract%20Alice's%20user_claims%20from%20access_token%0Aelse%20RqP%20Client%20uses%20Client%20Credential%20Grant%20-%20Alice%20is%20not%20involved%0AauthServer%3C-claimsProvider%3AGet%20Alice's%20user_claims%5Cn(CP%20client_credentials%2C%20Alice's%20email_address)%0AauthServer-%3EclaimsProvider%3AReturn%20Alice's%20user_claims%0Aend%0Aloop%20Authorization%20process%0AclaimsProvider-%3ErqpClient%3A6.%20Return%20claims_token%5Cn(Alice's%20user_claims%2C%20ticket_digest)%0ArqpClient-%3EasServer%3A7.%20Call%20token%20endpoint%5Cn(ticket%2C%20claims_token)%0Anote%20over%20asServer%3AEvaluate%5Cn1.%20ticket%5Cn2.%20ticket_digest%5Cn3.%20claims_token%20signature%5Cn4.%20user_claims%5Cn5.%20domain%20part%20of%20email_address%0ArqpClient%3C-asServer%3A8.%20Return%20RPT%0Aend%0ArqpClient-%3ErsServer%3A9.%20Post%20data%20into%20'Incoming'%20resource%5Cn(RPT)%0ArqpClient%3C-rsServer%3A10.%20201%20Created</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="914" height="785"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="10.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="306.7286683431009" y="13.19381805" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">UMA Wide Ecosystem - Alice to Bob (push data)</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 14.507215167871093 78.15138224949999 L 14.507215167871093 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 70.95168664946094 78.15138224949999 L 70.95168664946094 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.89429047996873 78.15138224949999 L 295.89429047996873 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 78.15138224949999 L 534.7397375211145 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 708.4977822185103 78.15138224949999 L 708.4977822185103 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 809.7327303317877 78.15138224949999 L 809.7327303317877 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 901.8700128757525 78.15138224949999 L 901.8700128757525 728.1668181794998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray="6.766060538461538,2.9319595666666665"/></g><g><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 19.520866026871094 32.1489366485 A 5.013650858999999 5.013650858999999 0 1 1 19.52086352004587 32.143922998476604 M 14.507215167871093 37.16258750749999 L 14.507215167871093 47.893559521499995 M 8.174182503871094 41.03277413549999 L 20.840247831871093 41.03277413549999 M 14.507215167871093 47.893559521499995 L 8.174182503871094 57.92086123949999 M 14.507215167871093 47.893559521499995 L 20.840247831871093 57.92086123949999" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5.434148456445312" y="66.71673993949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4.39793935" y="75.51261863949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 33.412369685742185 54.4904685465 L 108.49100361317969 54.4904685465 L 108.49100361317969 78.15138224949999 L 33.412369685742185 78.15138224949999 L 33.412369685742185 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.95589807524219" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthN Server</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 242.55453558900388 54.4904685465 L 349.2340453709336 54.4904685465 L 349.2340453709336 78.15138224949999 L 242.55453558900388 78.15138224949999 L 242.55453558900388 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="252.0980639785039" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Claims Provider (CP)</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 502.90295809401687 54.4904685465 L 566.5765169482122 54.4904685465 L 566.5765169482122 78.15138224949999 L 502.90295809401687 78.15138224949999 L 502.90295809401687 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="512.4464864835169" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP Client</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 653.0787884359439 54.4904685465 L 763.9167760010768 54.4904685465 L 763.9167760010768 78.15138224949999 L 653.0787884359439 78.15138224949999 L 653.0787884359439 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.6223168254439" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Resource Server (RS)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 772.7126547010768 54.4904685465 L 846.7528059624987 54.4904685465 L 846.7528059624987 78.15138224949999 L 772.7126547010768 78.15138224949999 L 772.7126547010768 54.4904685465 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="782.2561830905768" y="69.3555035495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthZ Server</text></g><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 906.8836637347525 32.1489366485 A 5.013650858999999 5.013650858999999 0 1 1 906.8836612279273 32.143922998476604 M 901.8700128757525 37.16258750749999 L 901.8700128757525 47.893559521499995 M 895.5369802117525 41.03277413549999 L 908.2030455397526 41.03277413549999 M 901.8700128757525 47.893559521499995 L 895.5369802117525 57.92086123949999 M 901.8700128757525 47.893559521499995 L 908.2030455397526 57.92086123949999" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="894.873911496358" y="66.71673993949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RO</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="893.5712534153033" y="75.51261863949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 19.520866026871094 754.1586397379998 A 5.013650858999999 5.013650858999999 0 1 1 19.52086352004587 754.1536260879764 M 14.507215167871093 759.1722905969998 L 14.507215167871093 769.9032626109998 M 8.174182503871094 763.0424772249999 L 20.840247831871093 763.0424772249999 M 14.507215167871093 769.9032626109998 L 8.174182503871094 779.9305643289998 M 14.507215167871093 769.9032626109998 L 20.840247831871093 779.9305643289998" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="5.434148456445312" y="736.9626968794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="4.39793935" y="745.7585755794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Alice</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 33.412369685742185 728.1668181794998 L 108.49100361317969 728.1668181794998 L 108.49100361317969 751.8277318824998 L 33.412369685742185 751.8277318824998 L 33.412369685742185 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="42.95589807524219" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthN Server</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 242.55453558900388 728.1668181794998 L 349.2340453709336 728.1668181794998 L 349.2340453709336 751.8277318824998 L 242.55453558900388 751.8277318824998 L 242.55453558900388 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="252.0980639785039" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Claims Provider (CP)</text></g><path fill="none" stroke="none"/><g><path fill="lightpink" stroke="black" paint-order="fill stroke markers" d=" M 502.90295809401687 728.1668181794998 L 566.5765169482122 728.1668181794998 L 566.5765169482122 751.8277318824998 L 502.90295809401687 751.8277318824998 L 502.90295809401687 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="512.4464864835169" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RqP Client</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 653.0787884359439 728.1668181794998 L 763.9167760010768 728.1668181794998 L 763.9167760010768 751.8277318824998 L 653.0787884359439 751.8277318824998 L 653.0787884359439 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.6223168254439" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Resource Server (RS)</text></g><path fill="none" stroke="none"/><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 772.7126547010768 728.1668181794998 L 846.7528059624987 728.1668181794998 L 846.7528059624987 751.8277318824998 L 772.7126547010768 751.8277318824998 L 772.7126547010768 728.1668181794998 Z" stroke-miterlimit="10" stroke-width="1.407340592" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="782.2561830905768" y="743.0318531824998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">AuthZ Server</text></g><g><path fill="lightsteelblue" stroke="black" paint-order="fill stroke markers" d=" M 906.8836637347525 754.1586397379998 A 5.013650858999999 5.013650858999999 0 1 1 906.8836612279273 754.1536260879764 M 901.8700128757525 759.1722905969998 L 901.8700128757525 769.9032626109998 M 895.5369802117525 763.0424772249999 L 908.2030455397526 763.0424772249999 M 901.8700128757525 769.9032626109998 L 895.5369802117525 779.9305643289998 M 901.8700128757525 769.9032626109998 L 908.2030455397526 779.9305643289998" stroke-miterlimit="10" stroke-width="1.495299379" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="894.873911496358" y="736.9626968794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RO</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="893.5712534153033" y="745.7585755794998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Bob</text></g></g><g><g><g><rect fill="white" stroke="none" x="242.70979522308656" y="95.74313964949998" width="63.8273622428125" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="244.02917702808656" y="103.65943047949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Initiate request</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 14.507215167871093 107.17778195949998 L 527.4977973914479 107.17778195949998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,107.17778195949998) translate(-534.7397375211145,-107.17778195949998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 527.4098386044478 103.51283250116664 L 534.7397375211145 107.17778195949998 L 527.4098386044478 110.84273141783332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="556.2982412850273" y="120.37160000949997" width="130.64103716957032" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="557.6176230900273" y="128.28789083949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. Request 'Incoming' resource</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 131.80624231949997 L 701.2558420888437 131.80624231949997" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(708.4977822185103,131.80624231949997) translate(-708.4977822185103,-131.80624231949997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 701.1678833018436 128.14129286116665 L 708.4977822185103 131.80624231949997 L 701.1678833018436 135.4711917778333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="561.7138372933281" y="145.00006036949998" width="119.80984515296875" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="563.0332190983281" y="152.91635119949999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. 401 with permission ticket</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 708.4977822185103 156.43470267949996 L 541.9816776507812 156.43470267949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,156.43470267949996) translate(-534.7397375211145,-156.43470267949996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 542.0696364377812 152.76975322116664 L 534.7397375211145 156.43470267949996 L 542.0696364377812 160.0996521378333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="238.79368715284633" y="169.62852072949997" width="87.67602557289062" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="238.79368715284633" y="178.42439942949997" width="128.10404986488282" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="240.11306895784634" y="177.54481155949998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. Get access_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="240.11306895784634" y="186.34069025949998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(RqP Client client_credentials)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 189.85904173949996 L 78.19362677912761 189.85904173949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(70.95168664946094,189.85904173949996) translate(-70.95168664946094,-189.85904173949996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 78.2815855661276 186.19409228116663 L 70.95168664946094 189.85904173949996 L 78.2815855661276 193.52399119783328 Z"/></g></g><g><g><rect fill="white" stroke="none" x="252.52628450392055" y="203.05285978949996" width="100.63885516273437" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="253.84566630892056" y="210.96915061949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. Return access_token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 70.95168664946094 214.48750209949995 L 527.4977973914479 214.48750209949995" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,214.48750209949995) translate(-534.7397375211145,-214.48750209949995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 527.4098386044478 210.82255264116662 L 534.7397375211145 214.48750209949995 L 527.4098386044478 218.15245155783327 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 237.79658065449993 L 539.1376768711145 237.79658065449993 M 539.1376768711145 227.68132014949995 L 638.2909169577551 227.68132014949995 L 646.2072077877551 235.59761097949996 L 646.2072077877551 247.91184115949994 L 539.1376768711145 247.91184115949994 L 539.1376768711145 227.68132014949995 M 638.2909169577551 227.68132014949995 L 638.2909169577551 235.59761097949996 L 646.2072077877551 235.59761097949996" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="551.4519070511145" y="239.99555032949993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create ticket_digest</text></g><g><g><rect fill="white" stroke="none" x="306.3027469416354" y="261.10565920949995" width="85.07527178871094" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="306.3027469416354" y="269.90153790949995" width="218.0285341178125" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="307.6221287466354" y="269.0219500394999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. Get claims_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="307.6221287466354" y="277.81782873949993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(access_token, Alice's email_address, ticket_digest)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 281.33618021949997 L 303.1362306096354 281.33618021949997" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(295.89429047996873,281.33618021949997) translate(-295.89429047996873,-281.33618021949997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 303.2241893966354 277.6712307611666 L 295.89429047996873 281.33618021949997 L 303.2241893966354 285.0011296778333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 295.89429047996873 328.3941312645 L 291.49635112996873 328.3941312645 M 75.34962599946093 318.27887075949997 L 283.58006029996875 318.27887075949997 L 291.49635112996873 326.19516158949995 L 291.49635112996873 338.5093917695 L 75.34962599946093 338.5093917695 L 75.34962599946093 318.27887075949997 M 283.58006029996875 318.27887075949997 L 283.58006029996875 326.19516158949995 L 291.49635112996873 326.19516158949995" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="87.66385617946094" y="330.5931009395" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Extract Alice's user_claims from access_token</text></g><g><g><rect fill="white" stroke="none" x="87.63344532172655" y="375.4520823095" width="99.28608721839844" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="87.63344532172655" y="384.2479610095" width="191.57908648597657" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="88.95282712672656" y="383.36837313949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get Alice's user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="88.95282712672656" y="392.16425183949997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(CP client_credentials, Alice's email_address)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.89429047996873 395.6826033195 L 78.19362677912761 395.6826033195" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(70.95168664946094,395.6826033195) translate(-70.95168664946094,-395.6826033195)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 78.2815855661276 392.01765386116665 L 70.95168664946094 395.6826033195 L 78.2815855661276 399.34755277783336 Z"/></g></g><g><g><rect fill="white" stroke="none" x="127.29853016059374" y="408.8764213695" width="112.24891680824219" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="128.61791196559375" y="416.7927121995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Return Alice's user_claims</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 70.95168664946094 420.3110636795 L 288.6523503503021 420.3110636795" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(295.89429047996873,420.3110636795) translate(-295.89429047996873,-420.3110636795)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 288.5643915633021 416.64611422116667 L 295.89429047996873 420.3110636795 L 288.5643915633021 423.9760131378334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="342.8637592097018" y="470.4475722695" width="98.03810137855469" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="342.8637592097018" y="479.2434509695" width="144.9065095816797" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="344.1831410147018" y="478.36386309949995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">6. Return claims_token</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="344.1831410147018" y="487.15974179949995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Alice's user_claims, ticket_digest)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 295.89429047996873 490.6780932795 L 527.4977973914479 490.6780932795" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,490.6780932795) translate(-534.7397375211145,-490.6780932795)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 527.4098386044478 487.01314382116664 L 534.7397375211145 490.6780932795 L 527.4098386044478 494.34304273783334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="625.7997103978183" y="503.87191132949994" width="92.87304705726562" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="625.7997103978183" y="512.6677900294999" width="90.24490374671875" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="627.1190922028184" y="511.7882021594999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">7. Call token endpoint</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="627.1190922028184" y="520.5840808594999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(ticket, claims_token)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 524.1024323395 L 802.490790202121 524.1024323395" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(809.7327303317877,524.1024323395) translate(-809.7327303317877,-524.1024323395)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 802.402831415121 520.4374828811666 L 809.7327303317877 524.1024323395 L 802.402831415121 527.7673817978333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 730.7892658378229 537.2962503895 L 880.7599039957526 537.2962503895 L 888.6761948257525 545.2125412194999 L 888.6761948257525 601.5061648994999 L 730.7892658378229 601.5061648994999 L 730.7892658378229 537.2962503895 M 880.7599039957526 537.2962503895 L 880.7599039957526 545.2125412194999 L 888.6761948257525 545.2125412194999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="549.6104805694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Evaluate</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="558.4063592694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">1. ticket</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="567.2022379694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">2. ticket_digest</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="575.9981166694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">3. claims_token signature</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="584.7939953694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">4. user_claims</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="743.1034960178229" y="593.5898740694998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">5. domain part of email_address</text></g><g><g><rect fill="white" stroke="none" x="641.1082583714511" y="614.6999829494999" width="62.25595111" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="642.4276401764512" y="622.6162737794999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">8. Return RPT</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 809.7327303317877 626.1346252594999 L 541.9816776507812 626.1346252594999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,626.1346252594999) translate(-534.7397375211145,-626.1346252594999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 542.0696364377812 622.4696758011665 L 534.7397375211145 626.1346252594999 L 542.0696364377812 629.7995747178333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="545.1481939827812" y="652.5222613594999" width="152.9411317740625" height="11.43464231"/></g><g><rect fill="white" stroke="none" x="545.1481939827812" y="661.3181400594999" width="27.507705870742186" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="546.4675757877812" y="660.4385521894999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">9. Post data into 'Incoming' resource</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="546.4675757877812" y="669.2344308894999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(RPT)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7397375211145 672.7527823694999 L 701.2558420888437 672.7527823694999" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(708.4977822185103,672.7527823694999) translate(-708.4977822185103,-672.7527823694999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 701.1678833018436 669.0878329111665 L 708.4977822185103 672.7527823694999 L 701.1678833018436 676.4177318278332 Z"/></g></g><g><g><rect fill="white" stroke="none" x="586.8492514168632" y="685.9466004194999" width="69.53901690589844" height="11.43464231"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="588.1686332218633" y="693.8628912494999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">10. 201 Created</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 708.4977822185103 697.3812427294998 L 541.9816776507812 697.3812427294998" stroke-miterlimit="10" stroke-width="0.7329898916666666" stroke-dasharray=""/><g transform="translate(534.7397375211145,697.3812427294998) translate(-534.7397375211145,-697.3812427294998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 542.0696364377812 693.7162932711665 L 534.7397375211145 697.3812427294998 L 542.0696364377812 701.0461921878332 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 40.16611119946094 294.52999826949997 L 326.67986592996874 294.52999826949997 L 326.67986592996874 433.5048817295 L 40.16611119946094 433.5048817295 L 40.16611119946094 294.52999826949997 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 40.16611119946094 294.52999826949997 L 40.16611119946094 305.08505270949996 L 66.45562250571095 305.08505270949996 L 71.73314972571094 299.8075254895 L 71.73314972571094 294.52999826949997 L 40.16611119946094 294.52999826949997" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="48.961989899460946" y="301.5667012295" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="80.52902842571095" y="301.5667012295" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[RqP Client uses Authorization Code Grant - Alice is involved]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 40.16611119946094 351.7032098195 L 326.67986592996874 351.7032098195" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray="2.198969675"/></g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="80.52902842571095" y="358.7399127795" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[RqP Client uses Client Credential Grant - Alice is not involved]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 265.1087150299687 446.69869977950003 L 893.0741341757525 446.69869977950003 L 893.0741341757525 639.3284433094999 L 265.1087150299687 639.3284433094999 L 265.1087150299687 446.69869977950003 Z" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 265.1087150299687 446.69869977950003 L 265.1087150299687 457.2537542195 L 298.42921693680466 457.2537542195 L 303.7067441568047 451.97622699950006 L 303.7067441568047 446.69869977950003 L 265.1087150299687 446.69869977950003" stroke-miterlimit="10" stroke-width="1.2565541" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="273.9045937299687" y="453.73540273950005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><text fill="black" stroke="none" font-family="sans-serif" font-size="5.6000000000000005pt" font-style="normal" font-weight="bold" text-decoration="normal" x="312.5026228568047" y="453.73540273950005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[Authorization process]</text></g></g></g></svg>